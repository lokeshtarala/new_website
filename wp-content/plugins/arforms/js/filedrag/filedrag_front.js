var ajaxProcess=!1;window.is_drag=!1,jQuery(document).ready(function(){function e(e){return document.getElementById(e)}function a(e){e.stopPropagation(),e.preventDefault();var a=jQuery(e.target).parents(".arfmainformfield").attr("data-view");"arf_disable"!=a&&(e.target.className="dragover"==e.type?"arf_hover_file arf_file_drag_reply_container":"arf_file_drag_reply_container")}function r(e){var a=e.target.files||e.dataTransfer.files,r=a,i=jQuery(this);if(a.length<1)return!1;for(var l,n=0;l=a[n];n++){var d=i.attr("id").split("field_"),s=d[1],f=jQuery("#arf_multi_file_uploader_"+s).find(".arfprogress:last").attr("arfupldcnt");f="undefined"==f||isNaN(f)||""==f?1:parseInt(f)+1;var _=f,o=jQuery(this).attr("name").split("file"),u=o[1],p=(jQuery("#file_types_"+s).val(),jQuery(this).attr("data-form-id"),jQuery(this).attr("data-form-data-id"),jQuery("#file_size_"+s).val(),document.getElementById("arf_multi_file_uploader_"+s).innerHTML),m='<div class = "arfprogress progress-striped" id = "progress_'+s+"_"+_+'" arfupldcnt="'+f+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+s+"_"+_+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>';document.getElementById("arf_multi_file_uploader_"+s).innerHTML=p+m,jQuery("#arf_multi_file_uploader_"+s).show()}var c=setInterval(function(){if(!ajaxProcess){var e=i.attr("id").split("field_"),a=e[1],l=i.attr("name").split("file"),n=l[1],d=jQuery("#file_types_"+a).val(),s=i.attr("data-form-id"),f=i.attr("data-form-data-id"),_=n,o=jQuery("#file_size_"+a).val(),u=jQuery("#arf_multi_file_uploader_"+a).find(".arfprogress.counting:last").attr("arfupldcnt");u="undefined"==u||isNaN(u)||""==u?1:parseInt(u)+1,t(r[Object.keys(r)[0]],a,d,s,_,o,f,u);for(var p=new Object,m=0;m<r.length;m++)0!==m&&(p[m-1]=r[m],p.length=m);r=p,jQuery.isEmptyObject(r)&&clearInterval(c)}},0)}function i(e){window.is_drag=!0,e.preventDefault();var r=jQuery(e.target).parents(".arfmainformfield").attr("data-view");if("arf_disable"==r)return!1;a(e);var i=e.target.files||e.dataTransfer.files;if(ajaxProcess)return!1;for(var l,n=i,d=(jQuery(this),jQuery(this).data("id")),s=0;l=i[s];s++){var f=jQuery("#"+d).attr("id").split("field_"),_=f[1],o=jQuery("#arf_multi_file_uploader_"+_).find(".arfprogress:last").attr("arfupldcnt");o="undefined"==o||isNaN(o)||""==o?1:parseInt(o)+1;var u=o,p=jQuery("#"+d).attr("name").split("file"),m=p[1];jQuery(".arf_field_"+m).addClass("arf_success");var c=(jQuery("#file_types_"+_).val(),jQuery("#"+d).attr("data-form-id"),jQuery("#"+d).attr("data-form-data-id"),jQuery("#file_size_"+_).val(),document.getElementById("arf_multi_file_uploader_"+_).innerHTML),y='<div class = "arfprogress progress-striped" id = "progress_'+_+"_"+u+'" arfupldcnt="'+o+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+_+"_"+u+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>';if(document.getElementById("arf_multi_file_uploader_"+_).innerHTML=c+y,jQuery("#arf_multi_file_uploader_"+_).show(),!document.getElementById(d).multiple)break}var v=setInterval(function(){if(!ajaxProcess){var e=jQuery("#"+d).attr("id").split("field_"),a=e[1],r=jQuery("#"+d).attr("name").split("file"),i=r[1],l=jQuery("#file_types_"+a).val(),s=jQuery("#"+d).attr("data-form-id"),f=jQuery("#"+d).attr("data-form-data-id"),_=i,o=jQuery("#file_size_"+a).val(),u=jQuery("#arf_multi_file_uploader_"+a).find(".arfprogress.counting:last").attr("arfupldcnt");u="undefined"==u||isNaN(u)||""==u?1:parseInt(u)+1,t(n[Object.keys(n)[0]],a,l,s,_,o,f,u);for(var p=new Object,m=0;m<n.length;m++)0!==m&&(p[m-1]=n[m],p.length=m);n=p,jQuery.isEmptyObject(n)&&clearInterval(v),document.getElementById(d).multiple||clearInterval(v)}},1e3);return;var d,s,l,f,_,p,m}function t(e,a,r,i,t,l,n,d){if(ajaxProcess=!0,!(location.host.indexOf("sitepointstatic")>=0)){var s=new XMLHttpRequest,f=e.name.lastIndexOf("."),_=e.name.substring(f+1);_=_.toLowerCase();var o=r.split(","),u=!0;"auto"!=l&&" "!=l&&0!=l&&(u=e.size<=l);var p=r.indexOf(_)>=0,m=(new Date).getTime(),c=i+"_"+t+"_"+m;if(p&&u&&"php"!=_&&"php3"!=_&&"php4"!=_&&"php5"!=_&&"pl"!=_&&"py"!=_&&"jsp"!=_&&"asp"!=_&&"exe"!=_&&"cgi"!=_){var y=e.name.lastIndexOf("."),v=e.name.substring(y+1),j=/.*(?=\.)/.exec(e.name),Q=i+"_"+t+"_"+m+"_"+j,h=Q.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+v,g=a,w=jQuery('[data-id="is_form_preview_'+i+'"]').val(),b=jQuery('[data-id="arfmainformurl"]').val();jQuery("[data-id='arffiledragurl']").val();if(!jQuery.isFunction(is_ssl_replace))return;b=is_ssl_replace(b),s.open("POST",__ARFAJAXURL,!0);var I=new FormData;I.append("action","arf_send_form_data"),I.append("frm",i),I.append("field_id",g),I.append("file_type",e.type),I.append("types_arr",o),I.append("is_preview",w),I.append("files",e),jQuery('.arf_file_drag_reply_container[data-id="field_'+g+'"]').addClass("disable"),jQuery("#progress_"+a+"_"+d).addClass("arfprogress"),jQuery("#progress_"+a+"_"+d).addClass("active").addClass("counting").show(),jQuery("#info_"+a+"_"+d).css("display","inline-block"),s.upload.addEventListener("progress",function(e){var r=parseFloat(0+e.loaded/e.total*100);r=Math.round(r),jQuery("#progress_"+a+"_"+d+" div.bar").css("width",r+"%"),jQuery("#info_"+a+"_"+d+" #percent").html(r)},!1),s.addEventListener("load",function(){setTimeout(function(){jQuery("#info_"+a+"_"+d+" #percent").html("100"),jQuery("#progress_"+a+"_"+d+" div.bar").css("width","100%")},300)},!1),s.setRequestHeader("X_FILENAME",h),s.setRequestHeader("X-FILENAME",h),s.send(I),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var r=s.responseText;if(jQuery('input[name="file'+o+'"]').attr("data-is-insecure-file","false"),r.match(/(error_upload_security)/g)){jQuery("#progress_"+a).hide(),jQuery("#progress_"+a+"_"+d).addClass("counting"),jQuery("#info_"+a).hide();var l=r,f=l,_=jQuery("#field_"+a).attr("name").split("file"),o=_[1],u=!0;jQuery('input[name="file'+o+'"]').attr("data-is-insecure-file","true"),jQuery('input[name="file'+o+'"]').hasClass("arf_reply_drag_file")?(jQuery('input[name="file'+o+'"]').attr("data-file-valid","false"),jQuery('input[name="file'+o+'"]').trigger("change")):jQuery('input[name="file'+o+'"]').attr("data-file-valid","false"),jQuery("#arf_field_"+o+"_"+n+"_container").removeClass("arf_success");var p=jQuery("#arf_field_"+o+"_"+n+"_container .controls"),m=p.parents(".control-group").first(),y=m.find(".help-block").first(),v=p.closest("form").find('[data-id="form_id"]').val(),j="advance"==jQuery('[data-id="form_tooltip_error_'+v+'"]').val()?"advance":"normal",Q=(new Date).getTime(),h=(document.getElementById("arf_image_directory_url_"+i+"_"+n).value,'<div id="arf_'+c+"_"+Q+'" class="arf_file_info_item"><span id="remove_'+a+'" class="ajax-file-remove" data-info-id="info_'+a+"_"+d+'" data-progress-id="progress_'+a+"_"+d+'" style="position: relative; overflow: hidden;" data-current-file-size="'+e.size+'" data-current-file-size-counter="'+d+'" data-form-data-id="'+n+'" data-form-id="'+i+'" data-id="'+t+'" file-data-id="'+c+"_"+Q+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+e.name+"</span></div></span></div>");if(jQuery("#info_"+a+"_"+d).after(h),u)if("advance"==j){if(!jQuery.isFunction(arf_show_tooltip))return;var v=m.closest("form").find('[data-id="form_id"]').val(),g=(jQuery('[data-id="form_tooltip_error_'+v+'"]').attr("data-color"),jQuery('[data-id="form_tooltip_error_'+v+'"]').attr("data-position")),w="bounceInRight";"left"==g?w="bounceInLeft":"right"==g?w="bounceInRight":"top"==g?w="bounceInDown":"bottom"==g&&(w="bounceInUp"),jQuery("#arf_"+c+"_"+Q).addClass("arf_advance_error").popover({html:!0,trigger:"manual",placement:g,content:f,animation:!1}),jQuery("#arf_"+c+"_"+Q).popover("show"),jQuery("#arf_"+c+"_"+Q).addClass("arfanimated "+w)}else y.length?(y=jQuery('<ul role="alert"><li>'+f+"</li></ul>"),jQuery("#arf_"+c+"_"+Q).parent().parent().parent().find(".help-block").empty(),jQuery("#arf_"+c+"_"+Q).parent().parent().parent().find(".help-block").append(y),jQuery("#arf_"+c+"_"+Q).addClass("arf_error"),jQuery("#arf_"+c+"_"+Q+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor")):(y=jQuery('<div class="help-block arfanimated bounceInDownNor"><ul role="alert"><li>'+f+"</li></ul></div>"),jQuery("#arf_"+c+"_"+Q).parent().parent().parent().find(".help-block").append(y).addClass("arf_error"),jQuery("#arf_"+c+"_"+Q).addClass("arf_error"),jQuery("#arf_"+c+"_"+Q+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor"));if(!u){var b=document.getElementById("imagename_"+i+"_"+n).value,I=document.getElementById("upload_field_id_"+i+"_"+n).value;""!=b?(document.getElementById("imagename_"+i+"_"+n).value=b+","+i+"_"+o+"_"+Q+"_"+e.name,document.getElementById("upload_field_id_"+i+"_"+n).value=I+","+a+"_"+Q):(document.getElementById("imagename_"+i+"_"+n).value=i+"_"+o+"_"+Q+"_"+e.name,document.getElementById("upload_field_id_"+i+"_"+n).value=a+"_"+Q)}}else{var E=r.split("|");if(document.getElementById("field_"+a).value="","undefined"!=typeof jQuery('input[name="file'+t+'"]').attr("multiple")){var x=jQuery('input[name="file'+t+'"]').attr("data-file-valid");"false"!=x&&jQuery('input[name="file'+t+'"]').attr("data-file-valid","true")}else jQuery('input[name="file'+t+'"]').attr("data-file-valid","true");var b=document.getElementById("imagename_"+i+"_"+n).value,I=document.getElementById("upload_field_id_"+i+"_"+n).value;jQuery("#arf_multi_file_info_"+a).css("display","inline-block");var h=(document.getElementById("arf_image_directory_url_"+i+"_"+n).value,document.getElementById("arf_multi_file_info_"+a).innerHTML,'<div id="arf_'+c+'" class="arf_file_info_item"><span id="remove_'+a+'" class="ajax-file-remove" data-current-file-size="'+e.size+'" data-current-file-size-counter="'+d+'" data-info-id="info_'+a+"_"+d+'" data-progress-id="progress_'+a+"_"+d+'" style="position: relative; overflow: hidden;" data-form-data-id="'+n+'" data-form-id="'+i+'" data-id="'+t+'" file-data-id="'+c+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+e.name+"</span></div>");"width: 100%;"!==jQuery("#progress_"+a+"_"+d+" .bar").attr("style")?setTimeout(function(){jQuery("#info_"+a+"_"+d).after(h),jQuery("#progress_"+a+"_"+d).hide(),jQuery("#info_"+a+"_"+d).hide()},300):setTimeout(function(){jQuery("#info_"+a+"_"+d).after(h),jQuery("#progress_"+a+"_"+d).hide(),jQuery("#info_"+a+"_"+d).hide()},700),""!=b?(document.getElementById("imagename_"+i+"_"+n).value=b+","+E[1],document.getElementById("upload_field_id_"+i+"_"+n).value=I+","+E[2]+"_"+Q):(document.getElementById("imagename_"+i+"_"+n).value="undefined"!=typeof E[1]?E[1]:"",document.getElementById("upload_field_id_"+i+"_"+n).value="undefined"!=typeof E[2]?E[2]+"_"+Q:"");var C=E[2];jQuery('.arf_file_drag_reply_container[data-id="field_'+C+'"]').removeClass("disable")}}}}else{if(jQuery("#progress_"+a).hide(),jQuery("#progress_"+a+"_"+d).addClass("counting"),jQuery("#info_"+a).hide(),void 0!==typeof __ARFERR)var E=__ARFERR;else var E="Sorry, this file type is not permitted for security reasons.";if(p)if(void 0!==jQuery("#field_"+a).attr("data-size-invalid-message")&&""!=jQuery("#field_"+a).attr("data-size-invalid-message"))var x=jQuery("#field_"+a).attr("data-size-invalid-message");else var x=E;else if(void 0!==jQuery("#field_"+a).attr("data-invalid-message")&&""!=jQuery("#field_"+a).attr("data-invalid-message"))var x=jQuery("#field_"+a).attr("data-invalid-message");else var x=E;var C=jQuery("#field_"+a).attr("name").split("file"),g=C[1],z=!0;jQuery('input[name="file'+g+'"]').hasClass("arf_reply_drag_file")?(jQuery('input[name="file'+g+'"]').attr("data-file-valid","false"),jQuery('input[name="file'+g+'"]').trigger("change")):jQuery('input[name="file'+g+'"]').attr("data-file-valid","false"),jQuery("#arf_field_"+g+"_"+n+"_container").removeClass("arf_success");var k=jQuery("#arf_field_"+g+"_"+n+"_container .controls"),B=k.parents(".control-group").first(),M=B.find(".help-block").first(),H=k.closest("form").find('[data-id="form_id"]').val(),L="advance"==jQuery('[data-id="form_tooltip_error_'+H+'"]').val()?"advance":"normal",m=(new Date).getTime(),R=(document.getElementById("arf_image_directory_url_"+i+"_"+n).value,'<div id="arf_'+c+"_"+m+'" class="arf_file_info_item"><span id="remove_'+a+'" class="ajax-file-remove" data-info-id="info_'+a+"_"+d+'" data-progress-id="progress_'+a+"_"+d+'" style="position: relative; overflow: hidden;" data-current-file-size="'+e.size+'" data-current-file-size-counter="'+d+'" data-form-data-id="'+n+'" data-form-id="'+i+'" data-id="'+t+'" file-data-id="'+c+"_"+m+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+e.name+"</span></div></span></div>");if(jQuery("#info_"+a+"_"+d).after(R),z)if("advance"==L){if(!jQuery.isFunction(arf_show_tooltip))return;var H=B.closest("form").find('[data-id="form_id"]').val(),V=(jQuery('[data-id="form_tooltip_error_'+H+'"]').attr("data-color"),jQuery('[data-id="form_tooltip_error_'+H+'"]').attr("data-position")),N="bounceInRight";"left"==V?N="bounceInLeft":"right"==V?N="bounceInRight":"top"==V?N="bounceInDown":"bottom"==V&&(N="bounceInUp"),jQuery("#arf_"+c+"_"+m).addClass("arf_advance_error").popover({html:!0,trigger:"manual",placement:V,content:x,animation:!1}),jQuery("#arf_"+c+"_"+m).popover("show"),jQuery("#arf_"+c+"_"+m).addClass("arfanimated "+N)}else M.length?(M=jQuery('<ul role="alert"><li>'+x+"</li></ul>"),jQuery("#arf_"+c+"_"+m).parent().parent().parent().find(".help-block").empty(),jQuery("#arf_"+c+"_"+m).parent().parent().parent().find(".help-block").append(M),jQuery("#arf_"+c+"_"+m).addClass("arf_error"),jQuery("#arf_"+c+"_"+m+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor")):(M=jQuery('<div class="help-block arfanimated bounceInDownNor"><ul role="alert"><li>'+x+"</li></ul></div>"),jQuery("#arf_"+c+"_"+m).parent().parent().parent().find(".help-block").append(M).addClass("arf_error"),jQuery("#arf_"+c+"_"+m).addClass("arf_error"),jQuery("#arf_"+c+"_"+m+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor"));if(!z){var O=document.getElementById("imagename_"+i+"_"+n).value,D=document.getElementById("upload_field_id_"+i+"_"+n).value;""!=O?(document.getElementById("imagename_"+i+"_"+n).value=O+","+i+"_"+g+"_"+m+"_"+e.name,document.getElementById("upload_field_id_"+i+"_"+n).value=D+","+a+"_"+m):(document.getElementById("imagename_"+i+"_"+n).value=i+"_"+g+"_"+m+"_"+e.name,document.getElementById("upload_field_id_"+i+"_"+n).value=a+"_"+m)}}void 0===jQuery("#field_"+a).attr("multiple")&&jQuery("#field_"+a).parents(".arf_file_field").hide(),ajaxProcess=!1}}function l(){var e=[];return jQuery(".arf_form").each(function(){var a=jQuery(this);a.find(".arf_file_drag_reply_container").each(function(){e.push(jQuery(this).attr("data-id"))})}),jQuery(e).each(function(r){var t=jQuery('.arf_file_drag_reply_container[data-id="'+e[r]+'"]')[0];if(null!=t){var l=new XMLHttpRequest;l.upload&&(t.addEventListener("dragover",a,!1),t.addEventListener("dragleave",a,!1),t.addEventListener("drop",i,!1),t.style.display="block")}}),!1}window.File&&window.FileList&&window.FileReader&&l(),jQuery(document).on("click",".original",function(){var a=e(jQuery(this).attr("id")),i=jQuery(this).attr("id").replace("field_",""),t=jQuery("#type_"+i).val();if("0"==t){a.addEventListener("change",r,!1);jQuery(this).attr("id").split("field_")}var l=new XMLHttpRequest;l.upload}),jQuery(document).on("click",".arf_reply_drag_file",function(){var a=e(jQuery(this).attr("id")),i=jQuery(this).attr("id").replace("field_","");if(jQuery('.arf_file_drag_reply_container[data-id="field_'+i+'"]').hasClass("disable"))return!1;var t=jQuery("#type_"+i).val();if("0"==t){a.addEventListener("change",r,!1);jQuery(this).attr("id").split("field_")}var l=new XMLHttpRequest;l.upload}),jQuery(document).on("click",".ajax-file-remove:not(.disable)",function(){var e=jQuery(this).attr("file-data-id"),a=jQuery(this).attr("id").replace("remove_","");if(window.arf_is_submitting_form)return!1;if("undefined"==typeof e.split("_")[0]){var r=jQuery(this).attr("data-id");jQuery("#arf_"+e).popover("destroy");var i=jQuery(this).attr("data-progress-id"),t=jQuery(this).attr("data-info-id");return jQuery("#"+i).remove(),jQuery("#"+t).remove(),jQuery("#arf_"+e).remove(),jQuery(".arf_field_"+r).find(".arf_file_field").show(),jQuery(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+a+'"]').removeClass("disable"),!1}jQuery(this).addClass("disable");var l=jQuery(this).attr("data-id"),n=(e.split("_"),a),d=jQuery(this).attr("data-form-id"),s=jQuery(this).attr("data-form-data-id"),f=jQuery("#imagename_"+d+"_"+s).val(),_=jQuery('[data-id="is_form_preview_'+d+'"]').val(),i=jQuery(this).attr("data-progress-id"),t=jQuery(this).attr("data-info-id"),o=(jQuery(this).attr("data-current-file-size"),jQuery(this).attr("data-current-file-size-counter"),jQuery(this).parents(".arf_multi_file_info_container")),u=jQuery(this).parent(".arf_file_info_item").hasClass("arf_error"),p=jQuery(this).parent(".arf_file_info_item").hasClass("arf_advance_error");if(1==p&&(u=p),c="",e.indexOf(".")<0)if(f.indexOf(",")>=0){var m=f.split(","),c="";if(u)m.indexOf(e)>-1&&(c=e);else for(key in m)m[key].indexOf(e)>=0&&(c=m[key])}else c=f;if(jQuery(this).parents(".controls").find("#arf_reply_drag_and_drop").length>0||jQuery(this).parents(".controls").length>0){var y=jQuery(this).parents(".controls").find(".help-block");y.attr("class","help-block"),y.html("");var r=jQuery(this).attr("data-id");jQuery("#arf_"+e).popover("destroy");var a=jQuery(this).attr("id").replace("remove_",""),i=jQuery(this).attr("data-progress-id"),t=jQuery(this).attr("data-info-id");jQuery("#"+i).remove(),jQuery("#"+t).remove(),jQuery("#arf_"+e).remove(),jQuery(".arf_field_"+r).find(".arf_file_field").show(),jQuery(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+a+'"]').removeClass("disable"),jQuery(".ajax-file-remove").removeClass("disable")}var v=1;if(o.find(".ajax-file-remove").each(function(){jQuery(this).attr("data-current-file-size-counter",v),v++}),!u){if(""==c&&0==_)return;if(void 0===typeof __ARFAJAXURL)return;if(!jQuery.isFunction(is_ssl_replace))return}var j=jQuery(this).parents(".file_main_control");if(u){var Q=document.getElementById("imagename_"+d+"_"+s).value,h=document.getElementById("upload_field_id_"+d+"_"+s).value;if(""!=c){if(Q.indexOf(c+",")>=0)var g=Q.replace(c+",","");else if(Q.indexOf(c)>=0)var g=Q.replace(c,"");if(h.indexOf(n+",")>=0)var w=h.replace(n+",","");else if(h.indexOf(n)>=0)var w=h.replace(n,"");jQuery("#imagename_"+d+"_"+s).val(g),jQuery("#upload_field_id_"+d+"_"+s).val(w)}var b=jQuery("#arf_"+e).parent().next();jQuery("#arf_"+e).remove(),b.css("display","none"),jQuery(".ajax-file-remove").removeClass("disable"),jQuery("#"+i).remove(),jQuery("#"+t).remove(),jQuery(this).parent(".arf_file_info_item").remove();var I=!1;o.find(".ajax-file-remove").each(function(){(jQuery(this).parent(".arf_file_info_item").hasClass("arf_error")||jQuery(this).parent(".arf_file_info_item").hasClass("arf_advance_error"))&&(I=!0)}),I||jQuery('input[name="file'+l+'"]').attr("data-file-valid","true"),jQuery('input[name="file'+l+'"]').val("")}else jQuery.ajax({type:"POST",url:is_ssl_replace(__ARFAJAXURL),data:"action=arf_delete_file&file_name="+c+"&form_id="+d,success:function(){var a=jQuery("#imagename_"+d+"_"+s).val(),r=jQuery("#upload_field_id_"+d+"_"+s).val();if(a.indexOf(c+",")>=0)var l=a.replace(c+",","");else if(a.indexOf(c)>=0)var l=a.replace(c,"");if(r.indexOf(n+",")>=0)var f=r.replace(n+",","");else if(r.indexOf(n)>=0)var f=r.replace(n,"");jQuery("#imagename_"+d+"_"+s).val(l),jQuery("#upload_field_id_"+d+"_"+s).val(f);var _=jQuery("#arf_"+e).parent().next();jQuery("#arf_"+e).remove(),_.css("display","none"),jQuery(".ajax-file-remove").removeClass("disable"),jQuery("#"+i).remove(),jQuery("#"+t).remove()}});return j.find(".arf_file_field").show(),j.find(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+a+'"]').removeClass("disable"),!1}),jQuery(".original_btn").click(function(){var e=jQuery(this).attr("id").replace("div_","");jQuery("#"+e+"_iframe").contents().find("#fileselect").click();var a=jQuery(this).attr("data-id"),r=jQuery(this).attr("data-form-data-id");jQuery("#arf_field_"+a+"_"+r+"_container").find(".help-block").empty(),jQuery("#arf_field_"+a+"_"+r+"_container").find(".popover").remove(),jQuery("#progress_"+e).hide();var i=jQuery("#"+e+"_iframe").contents().find("#fileselect").val();if(""!=i){var t=jQuery("#file_types_"+e).val(),l=jQuery("#file_size_"+e).val(),n=t.split(","),d=i.replace(/C:\\fakepath\\/i,""),s=jQuery(this).attr("data-form-id"),f=(new Date).getTime(),_=d.lastIndexOf("."),o=d.substring(_+1),u=/.*(?=\.)/.exec(d),p=s+"_"+a+"_"+f+"_"+u,m=s+"_"+a+"_"+f,c=(p.replace(/[^\w\s]/gi,"").replace(" ","")+"."+o,e),y=jQuery('[data-id="is_form_preview_'+s+'"]').val(),v=jQuery('[data-id="arfmainformurl"]').val(),j=jQuery('[data-id="arffiledragurl"]').val(),Q="",h=jQuery('[data-id="arf_browser_name"]').attr("data-version"),g=jQuery('[data-id="arf_browser_name"]').val();if(!jQuery.isFunction(is_ssl_replace))return;v=is_ssl_replace(v),jQuery("#"+e+"_iframe").contents().find("form").attr("action",__ARFAJAXURL+"?action=arf_send_form_data&frm="+s+"&field_id="+c+"&file_type="+Q+"&file_size="+l+"&types_arr="+n+"&is_preview="+y+"&ie_version="+h+"&browser="+g),jQuery("#"+e+"_iframe").contents().find("form").submit(),jQuery("#div_"+e).css("margin-top","-4px"),jQuery("#progress_"+e).show(),jQuery("#info_"+e).css("display","inline-block"),jQuery("#info_"+e+" .percent").html("").show(),jQuery("#info_"+e+" #percent").html("Uploading..."),jQuery("#progress_"+e+" div.bar").animate({width:"100%"},"slow");var w=setInterval(function(){if(jQuery("#"+e+"_iframe").contents()){var t=jQuery("#"+e+"_iframe").contents().find(".uploaded").length;if(t>0){clearInterval(w),jQuery("#progress_"+e).removeClass("active").hide(),void 0===jQuery("#field_"+e).attr("multiple")&&jQuery("#field_"+e).parents(".arf_file_field").hide(),jQuery("#info_"+e+" #percent").html("File Uploaded").hide(),jQuery('input[name="file'+a+'"]').val(u),jQuery('input[name="file'+a+'"]').attr("data-file-valid","true");var n=jQuery("#"+e+"_iframe").contents().find(".uploaded").html(),d=n.split("|"),_=document.getElementById("imagename_"+s+"_"+r).value,o=document.getElementById("upload_field_id_"+s+"_"+r).value;jQuery("#arf_multi_file_info_"+e).css("display","inline-block");var p=(document.getElementById("arf_image_directory_url_"+s+"_"+r).value,document.getElementById("arf_multi_file_info_"+e).innerHTML),c=jQuery("#arf_multi_file_uploader_"+e).find(".arfprogress.counting:last").attr("arfupldcnt");c="undefined"==c||isNaN(c)||""==c?1:parseInt(c)+1;var y=c,v='<div id="arf_'+m+'" class="arf_file_info_item"><span id="remove_'+e+'" class="ajax-file-remove" data-current-file-size="'+l+'" data-current-file-size-counter="'+y+'" style="position: relative; overflow: hidden; float:left;" data-form-data-id="'+r+'" data-form-id="'+s+'" data-id="'+a+'" file-data-id="'+m+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+i.replace(/C:\\fakepath\\/i,"")+"</span></div>";document.getElementById("arf_multi_file_info_"+e).innerHTML=p+v,""!=_?(document.getElementById("imagename_"+s+"_"+r).value=_+","+d[1],document.getElementById("upload_field_id_"+s+"_"+r).value=o+","+d[2]+"_"+f):(document.getElementById("imagename_"+s+"_"+r).value=d[1],document.getElementById("upload_field_id_"+s+"_"+r).value=d[2]+"_"+f),jQuery("#"+e+"_iframe_div").html(" ").append('<iframe id="'+e+'_iframe" src="'+j+'/core/views/iframe.php"></iframe>')}var Q=jQuery("#"+e+"_iframe").contents().find(".error_upload").length,h=jQuery("#"+e+"_iframe").contents().find(".error_upload_size").length;if(Q>0||h>0){clearInterval(w);var g=a;if(jQuery('input[name="file'+g+'"]').attr("data-file-valid","false"),jQuery("#info_"+e+" .percent").html("").hide(),jQuery("#info_"+e+" #percent").html(""),jQuery("#info_"+e).hide(),jQuery("#progress_"+e+" div.bar").css({width:"100%"}),jQuery("#progress_"+e).hide(),"undefined"!=typeof __ARFERR)var b=__ARFERR;else var b="Sorry, this file type is not permitted for security reasons.";if(Q>0)if(void 0!==jQuery("#field_"+e).attr("data-invalid-message")&&""!=jQuery("#field_"+e).attr("data-invalid-message"))var I=jQuery("#field_"+e).attr("data-invalid-message");else var I=b;else if(void 0!==jQuery("#field_"+e).attr("data-size-invalid-message")&&""!=jQuery("#field_"+e).attr("data-size-invalid-message"))var I=jQuery("#field_"+e).attr("data-size-invalid-message");else var I=b;jQuery("#arf_field_"+g+"_"+r+"_container").removeClass("arf_success");var E=jQuery("#arf_field_"+g+"_"+r+"_container .controls"),x=E.parents(".control-group").first(),C=x.find(".help-block").first(),z=E.closest("form").find('[data-id="form_id"]').val(),k="advance"==jQuery('[data-id="form_tooltip_error_'+z+'"]').val()?"advance":"normal";if("advance"==k){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(x,C,I)}else C.length?(C=jQuery('<ul role="alert"><li>'+I+"</li></ul>"),x.find(".controls .help-block").append(C),x.find(".controls .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor")):(C=jQuery('<div class="help-block"><ul><li>'+I+"</li></ul></div>"),x.find(".controls").append(C),x.find(".controls .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor"));jQuery("#"+e+"_iframe_div").html(" ").append('<iframe id="'+e+'_iframe" src="'+j+'/core/views/iframe_multiple.php"></iframe>')}}},1e3)}})});